clc
clear all

%% Material data
E=210e9; %youngs modulus
nu=0.3; %poissons ratio 
F_min=-10e3; %min force
F_max=40e3; %max force
l_o=133; %
t=12; %plate thickness
a=4; %weld thickness
h=100; %height of welded horizontal plate
m=3; %slope for steels
FAT=40; %fatigue class for method 1&2
FAT_hs=100; %fatigue class for hot spot stress
F_r=F_max-F_min; %force range
R=F_min/F_max; 

%% Method 1 
W_b=(h*a)*(t+(h/3)); %section modulus
sigma_nom1=(F_r*l_o)/(2*W_b); %nominal stress in MPa
N_f1= 2*(10^6)*(FAT/sigma_nom1)^m; %fatigue life cycle from method 1

%% Method 2 
sigma_avg=233.6538; %average stress using method 2 in MPa
A_w= (2*a*t)+(a^2); %weld area
A= (t^2)/2; %area along longitudinal stress
sigma_nom2=(sigma_avg*A)/A_w; %nominal stress in MPa
N_f2= 2*(10^6)*(FAT/sigma_nom2)^m; %fatigue life cycle from method 2

L_m2=[	0.	404.75	
0.29703	385.66	
0.59406	366.56	
0.89109	347.47	
1.1881	328.38	
1.4851	309.28	
1.7822	290.19	
2.0792	271.09	
2.3762	252.	
2.6733	232.9	
2.9703	213.81	
3.2673	194.71	
3.5644	175.62	
3.8614	156.53	
4.1584	146.42	
4.4554	144.17	
4.7525	141.93	
5.0495	139.68	
5.3465	137.44	
5.6436	135.19	
5.9406	132.95	
6.2376	130.71	
6.5347	128.46	
6.8317	126.22	
7.1287	123.97	
7.4257	121.73	
7.7228	119.48	
8.0198	117.34	
8.3168	115.81	
8.6139	114.32	
8.9109	112.84	
9.2079	111.36	
9.505	109.87	
9.802	108.39	
10.099	106.91	
10.396	105.43	
10.693	103.94	
10.99	102.46	
11.287	100.98	
11.584	99.493	
11.881	98.01	
12.178	96.918	
12.475	96.087	
12.772	95.256	
13.069	94.426	
13.366	93.595	
13.663	92.764	
13.96	91.933	
14.257	91.102	
14.554	90.271	
14.851	89.441	
15.149	88.61	
15.446	87.779	
15.743	86.948	
16.04	86.057	
16.337	84.777	
16.634	83.496	
16.931	82.216	
17.228	80.935	
17.525	79.655	
17.822	78.374	
18.119	77.093	
18.416	75.813	
18.713	74.532	
19.01	73.252	
19.307	71.971	
19.604	70.691	
19.901	69.41	
20.198	68.423	
20.495	67.583	
20.792	66.742	
21.089	65.902	
21.386	65.062	
21.683	64.221	
21.98	63.381	
22.277	62.541	
22.574	61.7	
22.871	60.86	
23.168	60.019	
23.465	59.179	
23.762	58.339	
24.059	57.394	
24.356	56.032	
24.653	54.669	
24.95	53.307	
25.248	51.945	
25.545	50.582	
25.842	49.22	
26.139	47.858	
26.436	46.495	
26.733	45.133	
27.03	43.771	
27.327	42.408	
27.624	41.046	
27.921	39.684	
28.218	38.299	
28.515	36.906	
28.812	35.513	
29.109	34.121	
29.406	32.728	
29.703	31.335	
30.	29.942	
];

figure(1) 
plot(L_m2(:,1),L_m2(:,2));

%% Hot spot stress
sigma_04t=121.98;
sigma_10t=70.317;
sigma_hs=(1.67*sigma_04t)-(0.67*sigma_10t); %hot spot stress in MPa
N_fhs= 2*(10^6)*(FAT_hs/sigma_hs)^m; %fatigue life cycle from hot spot stress

L_hs=[0.	    319.52	
0.63706	288.01	
1.2741	256.49	
1.9112	224.98	
2.5482	196.25	
3.1853	177.75	
3.8224	159.26	
4.4594	140.64	
5.0965	121.98	
5.7335	115.09	
6.3706	109.05	
7.0077	103.07	
7.6447	97.157	
8.2818	91.345	
8.9189	87.555	
9.5559	83.765	
10.193	79.975	
10.83	76.185	
11.467	72.781	
12.104	70.317	
12.741	67.849	
13.378	65.381	
14.015	62.913	
14.652	60.786	
15.289	59.21	
15.927	57.626	
16.564	56.043	
17.201	54.46	
17.838	53.231	
18.475	52.224	
19.112	51.217	
19.749	50.21	
20.386	49.193	
21.023	48.395	
21.66	47.936	
22.297	47.478	
22.934	47.019	
23.571	46.56	
24.208	46.101	
24.845	45.977	
25.482	45.851	
26.119	45.745	
26.757	45.661	
27.394	45.578	
28.031	45.5	
28.668	45.451	
29.305	45.403	
29.942	45.354	
30.579	45.306	
31.216	45.245	
31.853	45.002	
32.49	44.732	
33.127	44.473	
33.764	44.215	
34.401	43.957	
35.038	43.662	
35.675	43.187	
36.312	42.701	
36.95	42.206	
37.587	41.711	
38.224	41.216	
38.861	40.912	
39.498	40.659	
40.135	40.406	
40.772	40.158	
41.409	39.917	
42.046	39.676	
42.683	39.435	
43.32	39.275	
43.957	39.37	
44.594	39.465	
45.231	39.584	
45.868	39.758	
46.505	39.932	
47.143	40.106	
47.78	40.281	
48.417	40.455	
49.054	40.618	
49.691	40.791	
50.328	40.974	
50.965	41.157	
51.602	41.341	
52.239	41.508	
52.876	41.636	
53.513	41.737	
54.15	41.838	
54.787	41.939	
55.424	42.024	
56.061	42.08	
56.698	42.135	
57.335	42.189	
57.973	42.236	
58.61	42.271	
59.247	42.301	
59.884	42.331	
60.521	42.361	
61.158	42.388	
61.795	42.409	
62.432	42.422	
63.069	42.427	
63.706	42.432	
64.343	42.438	
];

figure(2) 
plot(L_hs(:,1),L_hs(:,2));
%% Stress relieved specimen
f=(-0.4*R)+1.2;
FAT_sr=FAT*f;
FAT_hs_sr=FAT_hs*f;
N_f1_sr= 2*(10^6)*(FAT_sr/sigma_nom1)^m; %fatigue life cycle from method 1 for stress relieve 
N_f2_sr= 2*(10^6)*(FAT_sr/sigma_nom2)^m; %fatigue life cycle from method 2 for stress relieve
N_fhs_sr= 2*(10^6)*(FAT_hs_sr/sigma_hs)^m; %fatigue life cycle from hot spot stress for stress relieve

